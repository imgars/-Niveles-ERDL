<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Panel Admin</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&family=Poppins:wght@400;600;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/admin/css/admin.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <div class="admin-container">
        <button class="sidebar-toggle" id="sidebarToggle">&#9776;</button>
        <div class="sidebar-overlay" id="sidebarOverlay"></div>
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h2>Panel Admin</h2>
            </div>
            
            <nav class="sidebar-nav">
                <div class="nav-group-label">Principal</div>
                <a href="#dashboard" class="nav-link active" data-page="dashboard"><span>üìä</span> Dashboard</a>
                <a href="#graficas" class="nav-link" data-page="graficas"><span>üìà</span> Graficas</a>
                <a href="#alertas" class="nav-link" data-page="alertas"><span>üîî</span> <span class="nav-text">Alertas</span><span class="alert-badge" id="navAlertBadge" style="display:none">0</span></a>

                <div class="nav-group-label">Sistemas</div>
                <a href="#xp" class="nav-link" data-page="xp"><span>‚≠ê</span> Sistema XP</a>
                <a href="#niveles" class="nav-link" data-page="niveles"><span>üèÜ</span> Niveles</a>
                <a href="#roles" class="nav-link" data-page="roles"><span>üé≠</span> Roles por Nivel</a>
                <a href="#misiones" class="nav-link" data-page="misiones"><span>üéØ</span> Misiones</a>
                <a href="#misiones-live" class="nav-link" data-page="misiones-live"><span>üî¥</span> Misiones Live</a>
                <a href="#powerups" class="nav-link" data-page="powerups"><span>‚ö°</span> Power-ups</a>
                <a href="#economia" class="nav-link" data-page="economia"><span>üí∞</span> Economia</a>
                <a href="#sistemas-avanzados" class="nav-link" data-page="sistemas-avanzados"><span>üéõÔ∏è</span> Control Sistemas</a>

                <div class="nav-group-label">Administracion</div>
                <a href="#usuarios" class="nav-link" data-page="usuarios"><span>üë•</span> Gestion Usuarios</a>
                <a href="#estadisticas" class="nav-link" data-page="estadisticas"><span>üìâ</span> Estadisticas</a>
                <a href="#audit-log" class="nav-link" data-page="audit-log"><span>üìã</span> Audit Log</a>
                <a href="#logs" class="nav-link" data-page="logs"><span>üóíÔ∏è</span> Logs en Vivo</a>
                <a href="#configuracion" class="nav-link" data-page="configuracion"><span>‚öôÔ∏è</span> Configuracion</a>
                <a href="#personalizacion" class="nav-link" data-page="personalizacion"><span>üé®</span> Personalizar</a>
            </nav>
        </aside>
        
        <main class="main-content">
            <header class="top-bar">
                <h1 id="pageTitle">Dashboard Principal</h1>
                <div class="header-right">
                    <button class="alert-bell-btn" id="alertBellBtn" title="Alertas" onclick="showPage('alertas')">
                        üîî <span class="alert-bell-badge" id="alertBellBadge" style="display:none">0</span>
                    </button>
                    <div class="quick-customize">
                        <button class="customize-btn" id="quickCustomizeBtn" title="Personalizar">üé®</button>
                        <div class="customize-dropdown" id="customizeDropdown">
                            <div class="dropdown-section">
                                <h5>Tema Sidebar</h5>
                                <div class="mini-themes">
                                    <div class="mini-theme" data-theme="default" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);" title="Morado"></div>
                                    <div class="mini-theme" data-theme="ocean" style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);" title="Oceano"></div>
                                    <div class="mini-theme" data-theme="sunset" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);" title="Atardecer"></div>
                                    <div class="mini-theme" data-theme="forest" style="background: linear-gradient(135deg, #134e5e 0%, #71b280 100%);" title="Bosque"></div>
                                    <div class="mini-theme" data-theme="dark" style="background: linear-gradient(135deg, #232526 0%, #414345 100%);" title="Oscuro"></div>
                                    <div class="mini-theme" data-theme="fire" style="background: linear-gradient(135deg, #f12711 0%, #f5af19 100%);" title="Fuego"></div>
                                </div>
                            </div>
                            <div class="dropdown-section">
                                <h5>Fondo</h5>
                                <div class="mini-backgrounds">
                                    <div class="mini-bg" data-bg="light" style="background: #f5f7fa;" title="Claro"></div>
                                    <div class="mini-bg" data-bg="dark" style="background: #1a1a2e;" title="Oscuro"></div>
                                    <div class="mini-bg" data-bg="cream" style="background: #faf8f5;" title="Crema"></div>
                                    <div class="mini-bg" data-bg="blue" style="background: #e8f4fc;" title="Azul Claro"></div>
                                    <div class="mini-bg" data-bg="green" style="background: #e8f5e9;" title="Verde Claro"></div>
                                    <div class="mini-bg" data-bg="purple" style="background: #f3e5f5;" title="Lila"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="admin-dropdown-wrapper">
                        <div class="admin-info" id="adminInfoBtn">
                            <span id="adminName"></span>
                            <span class="admin-arrow">‚ñº</span>
                        </div>
                        <div class="admin-dropdown" id="adminDropdown">
                            <div class="admin-dropdown-item" id="sessionTimeItem">
                                <span>‚è±Ô∏è</span>
                                <span id="sessionTime">Sesion activa</span>
                            </div>
                            <div class="admin-dropdown-divider"></div>
                            <div class="admin-dropdown-item logout-item" id="headerLogoutBtn">
                                <span>üö™</span>
                                <span>Cerrar sesion</span>
                            </div>
                        </div>
                    </div>
                </div>
            </header>
            
            <div class="content-area">

                <!-- ===== DASHBOARD ===== -->
                <div id="dashboard-page" class="page active">
                    <div class="dashboard-grid">
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-icon">ü§ñ</div>
                                <div class="stat-content">
                                    <h3>Estado del Bot</h3>
                                    <p class="stat-value" id="botStatus">Conectando...</p>
                                    <p class="stat-label">Online</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">‚è±Ô∏è</div>
                                <div class="stat-content">
                                    <h3>Uptime</h3>
                                    <p class="stat-value" id="uptime">Cargando...</p>
                                    <p class="stat-label">Tiempo activo</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">üåê</div>
                                <div class="stat-content">
                                    <h3>Servidores</h3>
                                    <p class="stat-value" id="guildCount">0</p>
                                    <p class="stat-label">Conectados</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">üë•</div>
                                <div class="stat-content">
                                    <h3>Usuarios</h3>
                                    <p class="stat-value" id="userCount">0</p>
                                    <p class="stat-label">Registrados</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="events-section">
                            <h2>Eventos Hoy</h2>
                            <div class="events-container">
                                <div class="event-item">
                                    <span class="event-icon">‚≠ê</span>
                                    <div class="event-content">
                                        <p class="event-label">XP Generado</p>
                                        <p class="event-value" id="xpToday">0</p>
                                    </div>
                                </div>
                                <div class="event-item">
                                    <span class="event-icon">üèÜ</span>
                                    <div class="event-content">
                                        <p class="event-label">Niveles Subidos</p>
                                        <p class="event-value" id="levelsToday">0</p>
                                    </div>
                                </div>
                                <div class="event-item">
                                    <span class="event-icon">‚úÖ</span>
                                    <div class="event-content">
                                        <p class="event-label">Misiones Completadas</p>
                                        <p class="event-value" id="missionsToday">0</p>
                                    </div>
                                </div>
                                <div class="event-item">
                                    <span class="event-icon">‚ö†Ô∏è</span>
                                    <div class="event-content">
                                        <p class="event-label">Errores</p>
                                        <p class="event-value" id="errorsToday">0</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="info-section">
                            <div class="info-card">
                                <h3>Informacion del Sistema</h3>
                                <div class="info-grid">
                                    <div class="info-row">
                                        <span class="info-label">Version del Bot:</span>
                                        <span class="info-value" id="botVersion">1.0.0</span>
                                    </div>
                                    <div class="info-row">
                                        <span class="info-label">Ultima sincronizacion:</span>
                                        <span class="info-value" id="lastSync">Hace unos momentos</span>
                                    </div>
                                    <div class="info-row">
                                        <span class="info-label">BD MongoDB:</span>
                                        <span class="info-value" id="mongoStatus">Conectando...</span>
                                    </div>
                                    <div class="info-row">
                                        <span class="info-label">Node.js:</span>
                                        <span class="info-value" id="nodeVersion">Cargando...</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="activity-section">
                            <h2>Actividad Ultimas Horas</h2>
                            <div class="activity-chart">
                                <div class="simple-bar-chart" id="activityChartContainer">
                                    <p style="color: #999;">Cargando datos...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ===== GRAFICAS ===== -->
                <div id="graficas-page" class="page">
                    <div class="section-content">
                        <div class="charts-toolbar">
                            <h3>Graficas de Actividad</h3>
                            <div class="charts-period-selector">
                                <button class="period-btn active" data-days="7">7 dias</button>
                                <button class="period-btn" data-days="14">14 dias</button>
                                <button class="period-btn" data-days="30">30 dias</button>
                            </div>
                        </div>
                        <div class="charts-grid">
                            <div class="chart-card">
                                <h4>XP Generado por Dia</h4>
                                <div class="chart-container">
                                    <canvas id="chartXpTimeline"></canvas>
                                </div>
                            </div>
                            <div class="chart-card">
                                <h4>Niveles Subidos por Dia</h4>
                                <div class="chart-container">
                                    <canvas id="chartLevelsTimeline"></canvas>
                                </div>
                            </div>
                            <div class="chart-card">
                                <h4>Distribucion de Niveles</h4>
                                <div class="chart-container">
                                    <canvas id="chartLevelDist"></canvas>
                                </div>
                            </div>
                            <div class="chart-card">
                                <h4>Comandos Mas Usados (Top 10)</h4>
                                <div class="chart-container">
                                    <canvas id="chartCommands"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ===== ALERTAS ===== -->
                <div id="alertas-page" class="page">
                    <div class="section-content">
                        <div class="page-header-actions">
                            <h3>Alertas del Sistema</h3>
                            <button class="btn-secondary" onclick="loadAlertsData()">Actualizar</button>
                        </div>
                        <div id="alertsList" class="alerts-list">
                            <p class="loading-text">Cargando alertas...</p>
                        </div>
                    </div>
                </div>

                <!-- ===== XP ===== -->
                <div id="xp-page" class="page">
                    <div class="section-content">
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-icon">‚≠ê</div>
                                <div class="stat-content">
                                    <h3>XP Total</h3>
                                    <p class="stat-value" id="totalXp">0</p>
                                    <p class="stat-label">Puntos acumulados</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">üìä</div>
                                <div class="stat-content">
                                    <h3>XP Promedio</h3>
                                    <p class="stat-value" id="avgXp">0</p>
                                    <p class="stat-label">Por usuario</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">üî•</div>
                                <div class="stat-content">
                                    <h3>XP Maximo</h3>
                                    <p class="stat-value" id="maxXp">0</p>
                                    <p class="stat-label">Usuario mas alto</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">üë•</div>
                                <div class="stat-content">
                                    <h3>Usuarios Activos</h3>
                                    <p class="stat-value" id="activeUsersXp">0</p>
                                    <p class="stat-label">Con XP > 0</p>
                                </div>
                            </div>
                        </div>
                        <div class="config-section">
                            <h3>Configuracion XP</h3>
                            <div class="config-grid">
                                <div class="config-item">
                                    <span class="config-label">Cooldown</span>
                                    <span class="config-value" id="xpCooldown">10s</span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">XP Base</span>
                                    <span class="config-value" id="xpBase">15-25</span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">Multiplicador Booster</span>
                                    <span class="config-value" id="boosterMult">2.0x</span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">Multiplicador Nocturno</span>
                                    <span class="config-value" id="nightMult">0.25x</span>
                                </div>
                            </div>
                        </div>
                        <div class="top-section">
                            <h3>Top 10 Usuarios por XP</h3>
                            <div class="top-list" id="topXpUsers"><p class="loading-text">Cargando...</p></div>
                        </div>
                    </div>
                </div>

                <!-- ===== NIVELES ===== -->
                <div id="niveles-page" class="page">
                    <div class="section-content">
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-icon">üèÜ</div>
                                <div class="stat-content">
                                    <h3>Nivel Maximo</h3>
                                    <p class="stat-value" id="maxLevel">0</p>
                                    <p class="stat-label">Alcanzado</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">üìä</div>
                                <div class="stat-content">
                                    <h3>Nivel Promedio</h3>
                                    <p class="stat-value" id="avgLevel">0</p>
                                    <p class="stat-label">Entre usuarios</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">üíØ</div>
                                <div class="stat-content">
                                    <h3>Nivel 100+</h3>
                                    <p class="stat-value" id="level100Count">0</p>
                                    <p class="stat-label">Usuarios elite</p>
                                </div>
                            </div>
                        </div>
                        <div class="distribution-section">
                            <h3>Distribucion por Nivel</h3>
                            <div class="distribution-chart" id="levelDistribution"><p class="loading-text">Cargando...</p></div>
                        </div>
                        <div class="top-section">
                            <h3>Top 10 Usuarios por Nivel</h3>
                            <div class="top-list" id="topLevelUsers"><p class="loading-text">Cargando...</p></div>
                        </div>
                    </div>
                </div>

                <!-- ===== ROLES ===== -->
                <div id="roles-page" class="page">
                    <div class="section-content">
                        <h3>Roles por Nivel</h3>
                        <p class="section-desc">Roles que se asignan automaticamente al alcanzar ciertos niveles</p>
                        <div class="roles-grid" id="levelRolesGrid"><p class="loading-text">Cargando...</p></div>
                        <h3 style="margin-top: 30px;">Roles Especiales</h3>
                        <div class="special-roles-grid" id="specialRolesGrid"><p class="loading-text">Cargando...</p></div>
                    </div>
                </div>

                <!-- ===== MISIONES ===== -->
                <div id="misiones-page" class="page">
                    <div class="section-content">
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-icon">üéØ</div>
                                <div class="stat-content">
                                    <h3>Semana</h3>
                                    <p class="stat-value" id="weekNumber">0</p>
                                    <p class="stat-label" id="missionYear">2024</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">üìã</div>
                                <div class="stat-content">
                                    <h3>Misiones Totales</h3>
                                    <p class="stat-value" id="totalMissions">0</p>
                                    <p class="stat-label">Esta semana</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">‚úÖ</div>
                                <div class="stat-content">
                                    <h3>Completadas</h3>
                                    <p class="stat-value" id="completedMissions">0</p>
                                    <p class="stat-label">Misiones</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">üìà</div>
                                <div class="stat-content">
                                    <h3>Tasa Completado</h3>
                                    <p class="stat-value" id="completionRate">0%</p>
                                    <p class="stat-label">De misiones</p>
                                </div>
                            </div>
                        </div>
                        <div class="info-section" style="margin-top: 20px;">
                            <div class="info-card">
                                <h3>Configuracion de Misiones</h3>
                                <div class="info-grid">
                                    <div class="info-row">
                                        <span class="info-label">Canal de notificaciones:</span>
                                        <span class="info-value" id="missionChannel">-</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ===== MISIONES LIVE ===== -->
                <div id="misiones-live-page" class="page">
                    <div class="section-content">
                        <div class="page-header-actions">
                            <h3>Misiones en Tiempo Real</h3>
                            <div class="live-indicator"><span class="live-dot"></span> En vivo (actualiza cada 30s)</div>
                        </div>
                        <div class="stats-grid" style="margin-bottom:20px">
                            <div class="stat-card">
                                <div class="stat-icon">üéØ</div>
                                <div class="stat-content">
                                    <h3>En Progreso</h3>
                                    <p class="stat-value" id="liveActiveMissions">0</p>
                                    <p class="stat-label">Usuarios con misiones activas</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">‚úÖ</div>
                                <div class="stat-content">
                                    <h3>Completadas Hoy</h3>
                                    <p class="stat-value" id="liveCompletedToday">0</p>
                                    <p class="stat-label">Misiones terminadas</p>
                                </div>
                            </div>
                        </div>
                        <div id="liveMissionsList" class="live-missions-list">
                            <p class="loading-text">Cargando misiones en progreso...</p>
                        </div>
                    </div>
                </div>

                <!-- ===== POWER-UPS ===== -->
                <div id="powerups-page" class="page">
                    <div class="section-content">
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-icon">üåç</div>
                                <div class="stat-content">
                                    <h3>Boosts Globales</h3>
                                    <p class="stat-value" id="globalBoostsCount">0</p>
                                    <p class="stat-label">Activos</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">üë§</div>
                                <div class="stat-content">
                                    <h3>Boosts Usuario</h3>
                                    <p class="stat-value" id="userBoostsCount">0</p>
                                    <p class="stat-label">Activos</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">üì∫</div>
                                <div class="stat-content">
                                    <h3>Boosts Canal</h3>
                                    <p class="stat-value" id="channelBoostsCount">0</p>
                                    <p class="stat-label">Activos</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">‚ö°</div>
                                <div class="stat-content">
                                    <h3>Total Activos</h3>
                                    <p class="stat-value" id="totalBoostsActive">0</p>
                                    <p class="stat-label">Power-ups</p>
                                </div>
                            </div>
                        </div>

                        <div class="boost-create-section">
                            <h3>Crear Nuevo Boost</h3>
                            <div class="boost-create-form">
                                <div class="form-row">
                                    <label>Tipo</label>
                                    <select id="newBoostType">
                                        <option value="global">Global (todos)</option>
                                        <option value="user">Por usuario (ID)</option>
                                        <option value="channel">Por canal (ID)</option>
                                    </select>
                                </div>
                                <div class="form-row" id="boostTargetRow" style="display:none">
                                    <label>ID del objetivo</label>
                                    <input type="text" id="newBoostTarget" placeholder="ID de usuario o canal">
                                </div>
                                <div class="form-row">
                                    <label>Multiplicador</label>
                                    <input type="number" id="newBoostMult" min="1.1" max="10" step="0.1" value="2" placeholder="2.0">
                                </div>
                                <div class="form-row">
                                    <label>Duracion (horas, 0 = permanente)</label>
                                    <input type="number" id="newBoostDuration" min="0" step="0.5" value="24" placeholder="24">
                                </div>
                                <div class="form-row">
                                    <label>Descripcion</label>
                                    <input type="text" id="newBoostDesc" placeholder="Evento especial...">
                                </div>
                                <button class="btn-primary" onclick="createBoost()">Crear Boost</button>
                            </div>
                        </div>

                        <div class="boosts-list-section">
                            <h3>Todos los Boosts Activos</h3>
                            <div class="boosts-list" id="allBoostsList">
                                <p class="loading-text">Cargando boosts...</p>
                            </div>
                        </div>

                        <div class="config-section">
                            <h3>Multiplicadores Base</h3>
                            <div class="config-grid">
                                <div class="config-item">
                                    <span class="config-label">Booster/VIP</span>
                                    <span class="config-value" id="boosterVipMult">2.0x</span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">Nocturno</span>
                                    <span class="config-value" id="nightBoostMult">+0.25x</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ===== ECONOMIA ===== -->
                <div id="economia-page" class="page">
                    <div class="section-content">
                        <div class="page-header-actions">
                            <h3>Gestion de Economia</h3>
                            <button class="btn-secondary" onclick="loadEconomyData()">Actualizar</button>
                        </div>

                        <div class="stats-grid" id="econStatsGrid">
                            <div class="stat-card">
                                <div class="stat-icon">üí∞</div>
                                <div class="stat-content">
                                    <h3>Coins en Circulacion</h3>
                                    <p class="stat-value" id="econTotalCoins">-</p>
                                    <p class="stat-label">Total cartera</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">üè¶</div>
                                <div class="stat-content">
                                    <h3>Coins en Banco</h3>
                                    <p class="stat-value" id="econTotalBank">-</p>
                                    <p class="stat-label">Total banco</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">üìä</div>
                                <div class="stat-content">
                                    <h3>Riqueza Total</h3>
                                    <p class="stat-value" id="econTotalWealth">-</p>
                                    <p class="stat-label">Cartera + banco</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">üìã</div>
                                <div class="stat-content">
                                    <h3>Transacciones</h3>
                                    <p class="stat-value" id="econTotalTx">-</p>
                                    <p class="stat-label">Registradas</p>
                                </div>
                            </div>
                        </div>

                        <div class="econ-richest-section" id="econRichest" style="display:none">
                            <h4>Usuario mas rico</h4>
                            <div class="richest-card" id="econRichestCard"></div>
                        </div>

                        <!-- ANOMALIAS -->
                        <div class="page-header-actions" style="margin-top:24px">
                            <h4>Deteccion de Anomalias</h4>
                            <button class="btn-sm btn-secondary" onclick="loadEconomyAnomalies()">Actualizar</button>
                        </div>
                        <div id="econAnomaliesList" class="anomalies-list">
                            <p class="loading-text">Cargando analisis...</p>
                        </div>

                        <!-- TRANSACCIONES RECIENTES -->
                        <div class="page-header-actions" style="margin-top:24px">
                            <h4>Transacciones Recientes</h4>
                            <div style="display:flex;gap:8px;align-items:center">
                                <select id="txTypeFilter" class="filter-select" onchange="loadEconomyTransactions()">
                                    <option value="">Todos los tipos</option>
                                    <option value="work">Trabajo</option>
                                    <option value="casino_win">Casino (ganancia)</option>
                                    <option value="casino_loss">Casino (perdida)</option>
                                    <option value="shop_purchase">Compra tienda</option>
                                    <option value="bank_deposit">Deposito banco</option>
                                    <option value="bank_withdraw">Retiro banco</option>
                                    <option value="daily_reward">Recompensa diaria</option>
                                    <option value="theft_success">Robo exitoso</option>
                                    <option value="admin_gift">Regalo admin</option>
                                </select>
                                <button class="btn-sm btn-secondary" onclick="loadEconomyTransactions()">Cargar</button>
                            </div>
                        </div>
                        <div class="table-scroll-wrapper">
                            <table class="data-table" id="econTxTable">
                                <thead>
                                    <tr>
                                        <th>Usuario</th>
                                        <th>Tipo</th>
                                        <th>Cantidad</th>
                                        <th>Descripcion</th>
                                        <th>Fecha</th>
                                    </tr>
                                </thead>
                                <tbody id="econTxBody">
                                    <tr><td colspan="5" class="empty-text">Haz clic en "Cargar" para ver transacciones</td></tr>
                                </tbody>
                            </table>
                        </div>
                        <p id="econTxTotal" class="section-desc" style="margin-top:6px"></p>

                        <!-- TIENDA -->
                        <div class="page-header-actions" style="margin-top:24px">
                            <h4>Catalogo de la Tienda</h4>
                            <div style="display:flex;gap:8px;align-items:center">
                                <select id="shopCatFilter" class="filter-select" onchange="filterShopItems()">
                                    <option value="">Todas las categorias</option>
                                    <option value="herramienta">Herramientas</option>
                                    <option value="tecnologia">Tecnologia</option>
                                    <option value="vehiculo">Vehiculos</option>
                                    <option value="profesional">Profesional</option>
                                    <option value="instrumento">Instrumentos</option>
                                    <option value="consumible">Consumibles</option>
                                    <option value="powerup">Power-ups</option>
                                    <option value="coleccionable">Coleccionables</option>
                                    <option value="viaje">Viaje</option>
                                </select>
                            </div>
                        </div>
                        <div class="shop-items-grid" id="shopItemsGrid">
                            <p class="loading-text">Cargando tienda...</p>
                        </div>
                    </div>
                </div>

                <div id="sistemas-avanzados-page" class="page">
                    <div class="section-content">
                        <div class="page-header-actions">
                            <h3>Control Avanzado de Sistemas</h3>
                            <button class="btn-secondary" onclick="loadAdvancedSystems()">Actualizar</button>
                        </div>
                        <p class="section-desc">Activa o desactiva sistemas del bot con razon, programacion de reactivacion y overrides por canal.</p>
                        <div id="systemsGrid" class="systems-advanced-grid">
                            <p class="loading-text">Cargando sistemas...</p>
                        </div>
                    </div>
                </div>

                <!-- ===== ESTADISTICAS ===== -->
                <div id="estadisticas-page" class="page">
                    <div class="section-content">
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-icon">üë•</div>
                                <div class="stat-content">
                                    <h3>Usuarios Totales</h3>
                                    <p class="stat-value" id="statsTotalUsers">0</p>
                                    <p class="stat-label">Registrados</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">üî•</div>
                                <div class="stat-content">
                                    <h3>Usuarios Activos</h3>
                                    <p class="stat-value" id="statsActiveUsers">0</p>
                                    <p class="stat-label">Con XP > 0</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">üìÖ</div>
                                <div class="stat-content">
                                    <h3>Activos Hoy</h3>
                                    <p class="stat-value" id="statsActiveToday">0</p>
                                    <p class="stat-label">Usuarios</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">üìÜ</div>
                                <div class="stat-content">
                                    <h3>Activos Semana</h3>
                                    <p class="stat-value" id="statsActiveWeek">0</p>
                                    <p class="stat-label">Usuarios</p>
                                </div>
                            </div>
                        </div>
                        <div class="stats-grid" style="margin-top: 20px;">
                            <div class="stat-card">
                                <div class="stat-icon">‚≠ê</div>
                                <div class="stat-content">
                                    <h3>XP Total</h3>
                                    <p class="stat-value" id="statsTotalXp">0</p>
                                    <p class="stat-label">Acumulado</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">üìä</div>
                                <div class="stat-content">
                                    <h3>XP Promedio</h3>
                                    <p class="stat-value" id="statsAvgXp">0</p>
                                    <p class="stat-label">Por usuario</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">üèÜ</div>
                                <div class="stat-content">
                                    <h3>Nivel Promedio</h3>
                                    <p class="stat-value" id="statsAvgLevel">0</p>
                                    <p class="stat-label">Por usuario</p>
                                </div>
                            </div>
                        </div>
                        <div class="distribution-section">
                            <h3>Distribucion por Rango de Nivel</h3>
                            <div class="distribution-chart" id="statsLevelBrackets"><p class="loading-text">Cargando...</p></div>
                        </div>
                        <div class="page-header-actions" style="margin-top:20px">
                            <h3>Exportar Datos</h3>
                            <div class="export-btns">
                                <button class="btn-secondary" onclick="exportData('users','json')">Usuarios JSON</button>
                                <button class="btn-secondary" onclick="exportData('users','csv')">Usuarios CSV</button>
                                <button class="btn-secondary" onclick="exportData('leaderboard','json')">Leaderboard JSON</button>
                                <button class="btn-secondary" onclick="exportData('leaderboard','csv')">Leaderboard CSV</button>
                            </div>
                        </div>
                        <div class="system-stats">
                            <h3>Sistema</h3>
                            <div class="config-grid">
                                <div class="config-item">
                                    <span class="config-label">MongoDB</span>
                                    <span class="config-value" id="statsMongoStatus">-</span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">Memoria</span>
                                    <span class="config-value" id="statsMemory">-</span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">Uptime</span>
                                    <span class="config-value" id="statsUptime">-</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ===== AUDIT LOG ===== -->
                <div id="audit-log-page" class="page">
                    <div class="section-content">
                        <div class="page-header-actions">
                            <h3>Audit Log - Acciones de Administradores</h3>
                            <div class="export-btns">
                                <button class="btn-secondary" onclick="exportAuditLog()">Exportar CSV</button>
                                <button class="btn-secondary" onclick="loadAuditLog()">Actualizar</button>
                            </div>
                        </div>
                        <div class="audit-filters">
                            <input type="text" id="auditFilterAction" placeholder="Filtrar por accion..." class="filter-input">
                            <input type="text" id="auditFilterAdmin" placeholder="Filtrar por admin..." class="filter-input">
                            <button class="btn-primary" onclick="loadAuditLog(1)">Buscar</button>
                        </div>
                        <div class="audit-table-wrapper">
                            <table class="audit-table" id="auditTable">
                                <thead>
                                    <tr>
                                        <th>Fecha</th>
                                        <th>Admin</th>
                                        <th>Accion</th>
                                        <th>Detalles</th>
                                    </tr>
                                </thead>
                                <tbody id="auditTableBody">
                                    <tr><td colspan="4" class="loading-text">Cargando...</td></tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="pagination" id="auditPagination"></div>
                    </div>
                </div>

                <!-- ===== LOGS ===== -->
                <div id="logs-page" class="page">
                    <div class="section-content">
                        <div class="logs-container">
                            <div class="logs-filters">
                                <select id="logTypeFilter">
                                    <option value="">Todos los tipos</option>
                                    <option value="xp_gain">XP Ganado</option>
                                    <option value="level_up">Subida de Nivel</option>
                                    <option value="coins_gain">Monedas Ganadas</option>
                                    <option value="casino_win">Casino Win</option>
                                    <option value="admin_action">Accion Admin</option>
                                </select>
                                <select id="logSystemFilter">
                                    <option value="">Todos los sistemas</option>
                                    <option value="economia">Economia</option>
                                    <option value="niveles">Niveles</option>
                                    <option value="casino">Casino</option>
                                    <option value="misiones">Misiones</option>
                                </select>
                                <select id="logPeriodFilter">
                                    <option value="today">Hoy</option>
                                    <option value="week">Esta semana</option>
                                    <option value="all" selected>Todo</option>
                                </select>
                                <button class="filter-btn" id="applyLogsFilter">Filtrar</button>
                                <button class="filter-btn export-btn" id="exportLogsBtn">Exportar</button>
                            </div>
                            <div class="logs-list" id="logsList">
                                <p class="loading-text">Cargando logs...</p>
                            </div>
                            <div class="logs-pagination" id="logsPagination"></div>
                        </div>
                    </div>
                </div>

                <!-- ===== USUARIOS ===== -->
                <div id="usuarios-page" class="page">
                    <div class="section-content">
                        <div class="user-search-section">
                            <div class="search-bar">
                                <input type="text" id="userSearchInput" placeholder="Buscar usuario por nombre, ID o apodo..." />
                                <button id="userSearchBtn" class="search-btn">Buscar</button>
                            </div>
                        </div>

                        <div class="bulk-action-bar" id="bulkActionBar" style="display:none">
                            <span id="bulkSelectedCount">0 seleccionados</span>
                            <select id="bulkAction">
                                <option value="">-- Seleccionar accion --</option>
                                <option value="addXp">Agregar XP</option>
                                <option value="removeXp">Quitar XP</option>
                                <option value="addCoins">Agregar Coins</option>
                                <option value="removeCoins">Quitar Coins</option>
                                <option value="resetXp">Resetear XP</option>
                                <option value="banXp">Ban XP</option>
                                <option value="unbanXp">Desbanear XP</option>
                                <option value="resetCooldowns">Resetear Cooldowns</option>
                            </select>
                            <input type="number" id="bulkValue" placeholder="Valor" min="0">
                            <button class="btn-danger" onclick="executeBulkAction()">Aplicar</button>
                            <button class="btn-secondary" onclick="clearBulkSelection()">Cancelar</button>
                        </div>

                        <div class="users-list-section">
                            <div class="users-list-header">
                                <label class="checkbox-master">
                                    <input type="checkbox" id="selectAllUsers" onchange="toggleSelectAll(this)">
                                    <span>Seleccionar todos</span>
                                </label>
                                <span class="users-total" id="usersTotal"></span>
                            </div>
                            <div class="users-list" id="usersList">
                                <p class="empty-text">Busca un usuario para comenzar o carga la lista</p>
                            </div>
                            <button class="btn-secondary" id="loadAllUsersBtn" onclick="loadAllUsers()" style="margin-top:10px">Cargar todos los usuarios</button>
                            <div class="users-pagination" id="usersPagination"></div>
                        </div>

                        <div class="user-detail-panel" id="userDetailPanel" style="display:none;">
                            <div class="user-detail-header">
                                <img id="userDetailAvatar" src="" alt="Avatar" class="user-detail-avatar">
                                <div>
                                    <h3 id="userDetailName">Usuario</h3>
                                    <p id="userDetailId" class="user-detail-id"></p>
                                    <span id="userDetailBanBadge" class="ban-badge" style="display:none">BAN XP</span>
                                </div>
                                <button class="close-btn" onclick="closeUserDetail()">√ó</button>
                            </div>

                            <div class="user-tabs">
                                <button class="user-tab-btn active" data-tab="stats">Stats</button>
                                <button class="user-tab-btn" data-tab="advanced">Controles Avanzados</button>
                                <button class="user-tab-btn" data-tab="inventory">Inventario</button>
                                <button class="user-tab-btn" data-tab="history">Historial</button>
                            </div>

                            <div class="user-tab-content active" id="tab-stats">
                                <div class="user-stats-grid">
                                    <div class="user-stat-card">
                                        <h4>Total XP</h4>
                                        <span id="userTotalXp" class="user-stat-value">0</span>
                                        <div class="user-stat-actions">
                                            <button onclick="modifyUser('totalXp', 'add')">+</button>
                                            <button onclick="modifyUser('totalXp', 'remove')">-</button>
                                            <button onclick="modifyUser('totalXp', 'set')">Establecer</button>
                                            <button onclick="modifyUser('totalXp', 'reset')">Reset</button>
                                        </div>
                                    </div>
                                    <div class="user-stat-card">
                                        <h4>Nivel</h4>
                                        <span id="userLevel" class="user-stat-value">0</span>
                                        <div class="user-stat-actions">
                                            <button onclick="modifyUser('level', 'add')">+</button>
                                            <button onclick="modifyUser('level', 'remove')">-</button>
                                            <button onclick="modifyUser('level', 'set')">Establecer</button>
                                            <button onclick="modifyUser('level', 'reset')">Reset</button>
                                        </div>
                                    </div>
                                    <div class="user-stat-card">
                                        <h4>Lagcoins (Cartera)</h4>
                                        <span id="userLagcoins" class="user-stat-value">0</span>
                                        <div class="user-stat-actions">
                                            <button onclick="modifyUser('lagcoins', 'add')">+</button>
                                            <button onclick="modifyUser('lagcoins', 'remove')">-</button>
                                            <button onclick="modifyUser('lagcoins', 'set')">Establecer</button>
                                            <button onclick="modifyUser('lagcoins', 'reset')">Reset</button>
                                        </div>
                                    </div>
                                    <div class="user-stat-card">
                                        <h4>Lagcoins (Banco)</h4>
                                        <span id="userBank" class="user-stat-value">0</span>
                                        <div class="user-stat-actions">
                                            <button onclick="modifyUser('bank', 'add')">+</button>
                                            <button onclick="modifyUser('bank', 'remove')">-</button>
                                            <button onclick="modifyUser('bank', 'set')">Establecer</button>
                                            <button onclick="modifyUser('bank', 'reset')">Reset</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="user-extra-info">
                                    <div class="user-info-card">
                                        <h4>Roles del Usuario</h4>
                                        <div id="userRoles" class="user-roles-list"></div>
                                    </div>
                                </div>
                            </div>

                            <div class="user-tab-content" id="tab-advanced">
                                <div class="advanced-controls-grid">
                                    <div class="advanced-control-card">
                                        <h4>Ban de XP</h4>
                                        <div id="userXpBanStatus" class="xp-ban-status"></div>
                                        <div class="xp-ban-controls">
                                            <input type="number" id="xpBanDuration" placeholder="Duracion en minutos (0=perm)" min="0">
                                            <div class="xp-ban-buttons">
                                                <button class="btn-danger" onclick="applyXpBan(true)">Banear XP</button>
                                                <button class="btn-success" onclick="applyXpBan(false)">Desbanear</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="advanced-control-card">
                                        <h4>Cooldowns Activos</h4>
                                        <div id="userCooldownsList" class="cooldowns-list"></div>
                                        <button class="btn-secondary" onclick="resetUserCooldowns()">Resetear Cooldowns</button>
                                    </div>
                                    <div class="advanced-control-card">
                                        <h4>Matrimonio</h4>
                                        <div id="userMarriageInfo" class="marriage-info"></div>
                                    </div>
                                    <div class="advanced-control-card">
                                        <h4>Seguro</h4>
                                        <div id="userInsuranceInfo" class="insurance-info"></div>
                                    </div>
                                    <div class="advanced-control-card">
                                        <h4>Nacionalidad</h4>
                                        <div id="userNationalityInfo" class="nationality-info"></div>
                                    </div>
                                    <div class="advanced-control-card">
                                        <h4>Racha</h4>
                                        <div id="userStreakInfo" class="streak-info"></div>
                                    </div>
                                </div>
                            </div>

                            <div class="user-tab-content" id="tab-inventory">
                                <div id="userInventoryList" class="inventory-list">
                                    <p class="loading-text">Cargando inventario...</p>
                                </div>
                            </div>

                            <div class="user-tab-content" id="tab-history">
                                <div id="userActivityLogs" class="user-activity-logs"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ===== CONFIGURACION ===== -->
                <div id="configuracion-page" class="page">
                    <div class="section-content">
                        <div class="config-warning">
                            <span>Los cambios en la configuracion afectan el funcionamiento del bot. Cada cambio requiere confirmacion.</span>
                        </div>
                        <h3>Sistema de XP</h3>
                        <div class="config-grid">
                            <div class="config-item editable" data-field="cooldown" data-category="xpSystem">
                                <span class="config-label">Cooldown (segundos)</span>
                                <div class="config-edit-wrapper">
                                    <input type="number" class="config-input" id="cfgCooldown" min="1" max="300">
                                    <button class="config-save-btn" data-field="cooldown">Guardar</button>
                                </div>
                            </div>
                            <div class="config-item editable" data-field="baseMin" data-category="xpSystem">
                                <span class="config-label">XP Minimo</span>
                                <div class="config-edit-wrapper">
                                    <input type="number" class="config-input" id="cfgXpMin" min="1" max="100">
                                    <button class="config-save-btn" data-field="baseMin">Guardar</button>
                                </div>
                            </div>
                            <div class="config-item editable" data-field="baseMax" data-category="xpSystem">
                                <span class="config-label">XP Maximo</span>
                                <div class="config-edit-wrapper">
                                    <input type="number" class="config-input" id="cfgXpMax" min="1" max="200">
                                    <button class="config-save-btn" data-field="baseMax">Guardar</button>
                                </div>
                            </div>
                            <div class="config-item editable" data-field="boosterMultiplier" data-category="xpSystem">
                                <span class="config-label">Mult. Booster</span>
                                <div class="config-edit-wrapper">
                                    <input type="number" class="config-input" id="cfgBoosterMult" min="1" max="10" step="0.1">
                                    <button class="config-save-btn" data-field="boosterMultiplier">Guardar</button>
                                </div>
                            </div>
                            <div class="config-item editable" data-field="nightMultiplier" data-category="xpSystem">
                                <span class="config-label">Mult. Nocturno</span>
                                <div class="config-edit-wrapper">
                                    <input type="number" class="config-input" id="cfgNightMult" min="0" max="5" step="0.1">
                                    <button class="config-save-btn" data-field="nightMultiplier">Guardar</button>
                                </div>
                            </div>
                        </div>
                        <h3 style="margin-top: 30px;">Canales</h3>
                        <div class="config-grid">
                            <div class="config-item wide editable" data-field="levelUp" data-category="channels">
                                <span class="config-label">Canal Level Up (ID)</span>
                                <div class="config-edit-wrapper">
                                    <input type="text" class="config-input" id="cfgLevelUpChannel" placeholder="ID del canal">
                                    <button class="config-save-btn" data-field="levelUp">Guardar</button>
                                </div>
                            </div>
                            <div class="config-item wide editable" data-field="missionComplete" data-category="channels">
                                <span class="config-label">Canal Misiones (ID)</span>
                                <div class="config-edit-wrapper">
                                    <input type="text" class="config-input" id="cfgMissionChannel" placeholder="ID del canal">
                                    <button class="config-save-btn" data-field="missionComplete">Guardar</button>
                                </div>
                            </div>
                        </div>
                        <h3 style="margin-top: 30px;">Canales sin XP</h3>
                        <div class="no-xp-channels-wrapper">
                            <div class="no-xp-channels" id="cfgNoXpChannels"><p class="loading-text">Cargando...</p></div>
                            <div class="no-xp-add">
                                <input type="text" id="newNoXpChannel" placeholder="ID del canal a agregar">
                                <button class="btn-add-channel" id="addNoXpChannel">Agregar</button>
                            </div>
                        </div>
                        <h3 style="margin-top: 30px;">Roles Especiales</h3>
                        <div class="config-grid">
                            <div class="config-item editable" data-field="staff" data-category="roles">
                                <span class="config-label">Staff (ID)</span>
                                <div class="config-edit-wrapper">
                                    <input type="text" class="config-input" id="cfgStaffRole">
                                    <button class="config-save-btn" data-field="staff">Guardar</button>
                                </div>
                            </div>
                            <div class="config-item editable" data-field="booster" data-category="roles">
                                <span class="config-label">Booster (ID)</span>
                                <div class="config-edit-wrapper">
                                    <input type="text" class="config-input" id="cfgBoosterRole">
                                    <button class="config-save-btn" data-field="booster">Guardar</button>
                                </div>
                            </div>
                            <div class="config-item editable" data-field="vip" data-category="roles">
                                <span class="config-label">VIP (ID)</span>
                                <div class="config-edit-wrapper">
                                    <input type="text" class="config-input" id="cfgVipRole">
                                    <button class="config-save-btn" data-field="vip">Guardar</button>
                                </div>
                            </div>
                            <div class="config-item editable" data-field="level100" data-category="roles">
                                <span class="config-label">Nivel 100 (ID)</span>
                                <div class="config-edit-wrapper">
                                    <input type="text" class="config-input" id="cfgLevel100Role">
                                    <button class="config-save-btn" data-field="level100">Guardar</button>
                                </div>
                            </div>
                        </div>
                        <h3 style="margin-top: 30px;">Modo Mantenimiento</h3>
                        <div class="maintenance-section">
                            <label class="toggle-label">
                                <input type="checkbox" id="maintenanceToggle" onchange="toggleMaintenance(this.checked)">
                                <span class="toggle-slider"></span>
                                <span id="maintenanceStatus">Desactivado</span>
                            </label>
                            <p class="section-desc">El modo mantenimiento bloquea los comandos de economia para todos los usuarios no staff.</p>
                        </div>
                    </div>
                </div>

                <!-- ===== PERSONALIZACION ===== -->
                <div id="personalizacion-page" class="page">
                    <div class="section-content">
                        <h3>Personalizar Panel</h3>
                        <p class="section-desc">Elige colores y fondos para personalizar tu experiencia en el panel.</p>
                        <div class="customize-full-section">
                            <h4>Temas de Sidebar</h4>
                            <div class="themes-grid">
                                <div class="theme-card" data-theme="default"><div class="theme-preview" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);"></div><span>Morado</span></div>
                                <div class="theme-card" data-theme="ocean"><div class="theme-preview" style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);"></div><span>Oceano</span></div>
                                <div class="theme-card" data-theme="sunset"><div class="theme-preview" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);"></div><span>Atardecer</span></div>
                                <div class="theme-card" data-theme="forest"><div class="theme-preview" style="background: linear-gradient(135deg, #134e5e 0%, #71b280 100%);"></div><span>Bosque</span></div>
                                <div class="theme-card" data-theme="dark"><div class="theme-preview" style="background: linear-gradient(135deg, #232526 0%, #414345 100%);"></div><span>Oscuro</span></div>
                                <div class="theme-card" data-theme="fire"><div class="theme-preview" style="background: linear-gradient(135deg, #f12711 0%, #f5af19 100%);"></div><span>Fuego</span></div>
                            </div>
                            <h4 style="margin-top:24px">Fondos</h4>
                            <div class="themes-grid">
                                <div class="bg-card" data-bg="light"><div class="theme-preview" style="background: #f5f7fa;"></div><span>Claro</span></div>
                                <div class="bg-card" data-bg="dark"><div class="theme-preview" style="background: #1a1a2e;"></div><span>Oscuro</span></div>
                                <div class="bg-card" data-bg="cream"><div class="theme-preview" style="background: #faf8f5;"></div><span>Crema</span></div>
                                <div class="bg-card" data-bg="blue"><div class="theme-preview" style="background: #e8f4fc;"></div><span>Azul</span></div>
                                <div class="bg-card" data-bg="green"><div class="theme-preview" style="background: #e8f5e9;"></div><span>Verde</span></div>
                                <div class="bg-card" data-bg="purple"><div class="theme-preview" style="background: #f3e5f5;"></div><span>Lila</span></div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </main>
    </div>

    <!-- Confirm Modal -->
    <div class="modal-overlay" id="confirmModal" style="display:none">
        <div class="modal">
            <h3 id="modalTitle">Confirmar accion</h3>
            <p id="modalMessage"></p>
            <div class="modal-input-wrapper" id="modalInputWrapper" style="display:none">
                <input type="number" id="modalInputValue" placeholder="Valor" min="0">
                <input type="text" id="modalInputReason" placeholder="Razon (opcional)">
            </div>
            <div class="modal-buttons">
                <button class="btn-primary" id="modalConfirmBtn">Confirmar</button>
                <button class="btn-secondary" id="modalCancelBtn" onclick="hideConfirmModal()">Cancelar</button>
            </div>
        </div>
    </div>

    <script src="/admin/js/admin.js"></script>
</body>
</html>
